(function(){"use strict";BX.namespace("BX.Landing.UI");var e=BX.Landing.Utils.isString;BX.Landing.UI.Style=function(e){this.node="node"in e?e.node:null;this.id="id"in e?e.id:null;this.selector="selector"in e?e.selector:null;this.relativeSelector="relativeSelector"?e.relativeSelector:null;this.clickHandler="onClick"in e?e.onClick:function(){};this.iframe="iframe"in e?e.iframe:null;this.affects=new BX.Landing.Collection.BaseCollection;this.onFrameLoad()};BX.Landing.UI.Style.prototype={onFrameLoad:function(){if(!this.node){this.node=this.getNode()}this.node.forEach(function(e){e.addEventListener("click",this.onClick.bind(this));e.addEventListener("mouseenter",this.onMouseEnter.bind(this));e.addEventListener("mouseleave",this.onMouseLeave.bind(this))},this);this.value=this.getValue()},getNode:function(){return[].slice.call(this.iframe.document.querySelectorAll(this.relativeSelector))},onClick:function(e){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){e.preventDefault();e.stopPropagation();this.clickHandler()}},onMouseEnter:function(e){e.preventDefault();e.stopPropagation();this.highlight()},onMouseLeave:function(e){e.preventDefault();e.stopPropagation();this.unHighlight();var t=BX.type.isArray(this.node)&&this.node.length?this.node[0]:this.node;BX.fireEvent(t.parentNode,"mouseenter")},highlight:function(){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){BX.Landing.UI.Highlight.getInstance().show(this.node)}},unHighlight:function(){BX.Landing.UI.Highlight.getInstance().hide()},isChanged:function(){return JSON.stringify(this.value)!==JSON.stringify(this.getValue())},setValue:function(t,i,n,s,l){this.lastValue=this.lastValue||this.getValue();if(!!t&&BX.type.isArray(i)){s=!!s?s:"";if(typeof t==="object"){if("from"in t&&"to"in t){t.from+="-min";t.to+="-max"}var o=Object.keys(t);t=o.map(function(e){return t[e]})}else{t=[t]}if(s.length){this.affects.add(s)}this.getNode().forEach(function(n){t.forEach(function(l){i.forEach(function(e){if(t.indexOf(e.value)===-1&&t.indexOf(e.value+"-min")===-1&&t.indexOf(e.value+"-max")===-1){n.classList.remove(e.value);n.classList.remove(e.value+"-min");n.classList.remove(e.value+"-max")}});if(s){n.style[s]=null;[].slice.call(n.querySelectorAll("*")).forEach(function(t){if(s==="background-image"&&e(t.style[s])&&t.style[s].includes("url")){return}t.style[s]=null;if(s==="color"){t.removeAttribute("color")}})}n.classList.add(l)},this);if(l){l.items.forEach(function(e){n.classList.remove(e.value)})}})}},getValue:function(){return{classList:this.node.length?this.node[0].className.split(" "):[],affect:this.affects.toArray()}}}})();